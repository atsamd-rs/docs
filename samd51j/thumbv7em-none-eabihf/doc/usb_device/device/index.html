<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="USB composite device."><meta name="keywords" content="rust, rustlang, rust-lang, device"><title>usb_device::device - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../normalize.css"><link rel="stylesheet" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../ayu.css" disabled><link rel="stylesheet" href="../../dark.css" disabled><link rel="stylesheet" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script defer src="../../main.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../usb_device/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../usb_device/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module device</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Module <a href="../index.html">usb_device</a>::<wbr><a class="mod" href="#">device</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/usb_device/device.rs.html#1-549">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>USB composite device.</p>
<p>The <a href="struct.UsbDevice.html">UsbDevice</a> type in this module is the core of this crate. It combines
multiple USB class implementations and the USB bus driver and dispatches bus state changes and
control messages between them.</p>
<p>To implement USB support for your own project, the required code is usually as follows:</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code><span class="kw">use </span>usb_device::prelude::<span class="kw-2">*</span>;
<span class="kw">use </span>usb_serial; <span class="comment">// example class crate (not included)

// Create the device-specific USB peripheral driver. The exact name and arguments are device
// specific, so check the documentation for your device driver crate.
</span><span class="kw">let </span>usb_bus = device_specific_usb::UsbBus::new(...);

<span class="comment">// Create one or more USB class implementation. The name and arguments depend on the class,
// however most classes require the UsbAllocator as the first argument in order to allocate
// the required shared resources.
</span><span class="kw">let </span><span class="kw-2">mut </span>serial = usb_serial::SerialPort::new(<span class="kw-2">&amp;</span>usb_bus.allocator());

<span class="comment">// Build the final [UsbDevice](device::UsbDevice) instance. The required arguments are a
// reference to the peripheral driver created earlier, as well as a USB vendor ID/product ID
// pair. Additional builder arguments can specify parameters such as device class code or
// product name. If using an existing class, remember to check the class crate documentation
// for correct values.
</span><span class="kw">let </span><span class="kw-2">mut </span>usb_dev = UsbDeviceBuilder::new(<span class="kw-2">&amp;</span>usb_bus, UsbVidPid(<span class="number">0x5824</span>, <span class="number">0x27dd</span>))
    .product(<span class="string">&quot;Serial port&quot;</span>)
    .device_class(usb_serial::DEVICE_CLASS)
    .build();

<span class="comment">// At this point the USB peripheral is enabled and a connected host will attempt to enumerate
// it.
</span><span class="kw">loop </span>{
    <span class="comment">// Must be called more often than once every 10ms to handle events and stay USB compilant,
    // or from a device-specific interrupt handler.
    </span><span class="kw">if </span>(usb_dev.poll(<span class="kw-2">&amp;mut </span>[<span class="kw-2">&amp;mut </span>serial])) {
        <span class="comment">// Call class-specific methods here
        </span>serial.read(...);
    }
}</code></pre></div>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.UsbDevice.html" title="usb_device::device::UsbDevice struct">UsbDevice</a></div><div class="item-right docblock-short">A USB device consisting of one or more device classes.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.UsbDeviceBuilder.html" title="usb_device::device::UsbDeviceBuilder struct">UsbDeviceBuilder</a></div><div class="item-right docblock-short">Used to build new <a href="struct.UsbDevice.html" title="UsbDevice"><code>UsbDevice</code></a>s.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.UsbVidPid.html" title="usb_device::device::UsbVidPid struct">UsbVidPid</a></div><div class="item-right docblock-short">A USB vendor ID and product ID pair.</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.UsbDeviceState.html" title="usb_device::device::UsbDeviceState enum">UsbDeviceState</a></div><div class="item-right docblock-short">The global state of the USB device.</div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.CONFIGURATION_NONE.html" title="usb_device::device::CONFIGURATION_NONE constant">CONFIGURATION_NONE</a></div><div class="item-right docblock-short">The bConfiguration value for the not configured state.</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.CONFIGURATION_VALUE.html" title="usb_device::device::CONFIGURATION_VALUE constant">CONFIGURATION_VALUE</a></div><div class="item-right docblock-short">The bConfiguration value for the single configuration supported by this device.</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.DEFAULT_ALTERNATE_SETTING.html" title="usb_device::device::DEFAULT_ALTERNATE_SETTING constant">DEFAULT_ALTERNATE_SETTING</a></div><div class="item-right docblock-short">The default value for bAlternateSetting for all interfaces.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="usb_device" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.0 (69f9c33d7 2022-12-12)" ></div></body></html>